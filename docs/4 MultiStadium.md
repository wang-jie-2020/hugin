# MultiStadium

## 问题描述

基于事实，社会场馆的前台只能操作本馆的信息，而不能操作其他馆。

抽象出来，在考虑权限时需要考虑类似租户系统的场馆系统，针对不同的授权予以划分API访问权限。

## 解决方案

前期的方案：将场馆与角色绑定，在登录时就必须选择场馆，登录时按场馆+用户找到匹配的角色+场馆，若一致则可以登录，登录后就不考虑再校验。这种方案的缺点是复杂程度略高，对后续的操作支持也不够好。

整合的方案是：

- 场馆与用户绑定
- 用户角色的权限不因场馆不同而不同，比如售票员，在馆A是可以售票的，再赋予馆B权限，默认其可售票。这是一个重要的约定，也是可能存在冲突的约定。

### 程序设计

1. 场馆设计在业务模块中而不是认证模块中，认证模块只做存储

   淘汰的方案是在业务模块中存放用户与场馆的对照，淘汰的理由是：希望用户数据是一个完整的表述，这样在将来的更细节的拆分才有可能

2. 场馆Id的解析

   类似租户，查询参数、路由参数、Header均可

3. 场馆Id的检查

   因为设计方向是WebApi，直接增加中间件进行检查即可



